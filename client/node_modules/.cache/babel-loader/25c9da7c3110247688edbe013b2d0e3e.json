{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\OneDrive\\\\Desktop\\\\React\\\\social-network\\\\client\\\\src\\\\components\\\\NewPost\\\\NewPost.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { IoAddCircleOutline, IoCloseSharp } from \"react-icons/io5\";\nimport Header from \"../Header/header\";\nimport Footer from \"../Footer/footer\";\nimport axios from \"axios\";\nimport \"./newpost.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function NewPost() {\n  _s();\n\n  const token = JSON.parse(localStorage.getItem(\"token\"));\n  const user = token.user;\n  const [description, setDescription] = useState(\"\");\n  const [file, setFile] = useState();\n  const [alert, setAlert] = useState();\n  const alertStyle = alert === undefined ? {\n    display: \"none\"\n  } : {\n    display: \"block\",\n    color: \"red\"\n  };\n\n  var openFile = function (file) {\n    setFile(file.target.files[0]);\n    var input = file.target;\n    var reader = new FileReader();\n\n    reader.onload = function () {\n      var dataURL = reader.result;\n      var output = document.getElementById('output');\n      output.src = dataURL;\n    };\n\n    reader.readAsDataURL(input.files[0]);\n  };\n\n  const formdata = new FormData();\n\n  function uploadPhotoInfo(e) {\n    if (file === undefined) {\n      setAlert(\"Please select 1 picture\");\n      return false;\n    }\n\n    formdata.append(\"file\", file);\n    axios.formdata.append(\"photo\", \"/uploads/\" + file.name);\n    formdata.append(\"user\", JSON.stringify(user));\n    formdata.append(\"description\", description);\n    axios.post(\"http://localhost:5000/api/posts/uploadpost\", formdata).then(res => {\n      if (res.data === \"Uploaded\") {\n        window.location = \"/home\";\n      } else {\n        setAlert(\"Error:File is not uploaded successfully, try again.\");\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Newpost\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"photo-upload\",\n      children: [/*#__PURE__*/_jsxDEV(IoAddCircleOutline, {\n        color: \"royalblue\",\n        style: file ? {\n          display: \"none\"\n        } : {\n          display: \"block\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(IoCloseSharp, {\n        color: \"red\",\n        size: \"32px\",\n        id: \"close\",\n        style: file ? {\n          display: \"block\"\n        } : {\n          display: \"none\"\n        },\n        onClick: e => window.location = \"/newpost\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, this), !file ? /*#__PURE__*/_jsxDEV(\"input\", {\n        required: true,\n        type: \"file\",\n        onChange: e => openFile(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 20\n      }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n        id: \"output\",\n        alt: \"Puploadhoto\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 77\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"description-upload\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: description,\n        onChange: e => setDescription(e.target.value),\n        placeholder: \"Type description of yout photo...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => uploadPhotoInfo(),\n        children: \"UPLOAD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: alertStyle,\n        children: alert\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 12\n  }, this);\n}\n\n_s(NewPost, \"8sFbQsfcRs8qC6rJ2QXklIL1IJU=\");\n\n_c = NewPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"NewPost\");","map":{"version":3,"sources":["C:/Users/PC/OneDrive/Desktop/React/social-network/client/src/components/NewPost/NewPost.js"],"names":["useState","IoAddCircleOutline","IoCloseSharp","Header","Footer","axios","NewPost","token","JSON","parse","localStorage","getItem","user","description","setDescription","file","setFile","alert","setAlert","alertStyle","undefined","display","color","openFile","target","files","input","reader","FileReader","onload","dataURL","result","output","document","getElementById","src","readAsDataURL","formdata","FormData","uploadPhotoInfo","e","append","name","stringify","post","then","res","data","window","location","value"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\r\nimport {IoAddCircleOutline,IoCloseSharp} from \"react-icons/io5\";\r\nimport Header from \"../Header/header\";\r\nimport Footer from \"../Footer/footer\";\r\n\r\nimport axios from \"axios\";\r\nimport \"./newpost.css\";\r\n\r\nexport default function NewPost(){\r\n    const token=JSON.parse(localStorage.getItem(\"token\"));\r\n    const user=token.user;\r\n\r\n  \r\n\r\n    const [description,setDescription]=useState(\"\")\r\n    const[file,setFile]=useState();\r\n\r\n\r\n\r\n    const [alert,setAlert]=useState();\r\n    const alertStyle=alert===undefined ? {display:\"none\"}:{display:\"block\",color:\"red\"};\r\n  \r\n    var openFile = function(file) {\r\n        setFile(file.target.files[0]);\r\n        var input = file.target;\r\n    \r\n        var reader = new FileReader();\r\n        reader.onload = function(){\r\n          var dataURL = reader.result;\r\n          var output = document.getElementById('output');\r\n          output.src = dataURL;\r\n        };\r\n        reader.readAsDataURL(input.files[0]);\r\n      };\r\n            \r\n    const formdata=new FormData();\r\n\r\n    function uploadPhotoInfo(e){\r\n        if(file===undefined){\r\n            setAlert(\"Please select 1 picture\");\r\n            return false;\r\n        }\r\n        formdata.append(\"file\",file);\r\n        axios.\r\n        formdata.append(\"photo\",\"/uploads/\"+file.name);\r\n        formdata.append(\"user\",JSON.stringify(user));\r\n        formdata.append(\"description\",description);\r\n        axios.post(\"http://localhost:5000/api/posts/uploadpost\",formdata)\r\n        .then(res=>{\r\n            if(res.data===\"Uploaded\"){\r\n                window.location=\"/home\";\r\n            }else{\r\n                setAlert(\"Error:File is not uploaded successfully, try again.\")\r\n            }\r\n        })\r\n    }\r\n\r\n    return <div className=\"Newpost\">\r\n        <Header/>\r\n        <div className=\"photo-upload\">\r\n            <IoAddCircleOutline color=\"royalblue\" style={file ? {display:\"none\"}:{display:\"block\"}}/>\r\n            <IoCloseSharp color=\"red\" size=\"32px\" id=\"close\" style={file ? {display:\"block\"}:{display:\"none\"}} onClick={e=>window.location=\"/newpost\"}/>\r\n            {!file?<input required type=\"file\" onChange={e=>openFile(e)}/>: <img id=\"output\" alt=\"Puploadhoto\"/>}\r\n           \r\n        </div>\r\n    \t\r\n        <div className=\"description-upload\">\r\n            <textarea value={description} onChange={e=>setDescription(e.target.value)} placeholder=\"Type description of yout photo...\"></textarea>\r\n            <button onClick={()=>uploadPhotoInfo()}>UPLOAD</button>\r\n\r\n            <p style={alertStyle}>{alert}</p>\r\n        </div>\r\n        \r\n        <Footer/>\r\n    </div>\r\n}"]},"metadata":{},"sourceType":"module"}