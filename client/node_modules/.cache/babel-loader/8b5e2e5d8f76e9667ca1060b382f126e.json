{"ast":null,"code":"import _objectSpread from\"C:/Users/PC/OneDrive/Desktop/React/social-network/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{IoMdClose}from\"react-icons/io\";import{useState,useEffect}from\"react\";import axios from\"axios\";import\"./search.css\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Search(_ref){var setSearchToggle=_ref.setSearchToggle,user=_ref.user,setUser=_ref.setUser;var token=JSON.parse(localStorage.getItem(\"token\"));var users=useSelector(function(store){return store.search;});function follow(id){user.following.push(id);setUser(_objectSpread(_objectSpread({},user),{},{following:user.following}));console.log(user.following);axios.post(\"https://social-network-edin.herokuapp.com/api/users/follow\",{followedID:id,followerID:token.user._id}).then(function(res){if(res.data===\"Followed\"){console.log(\"Extra\");}else{console.log(\"Problem\");}});}function unfollow(id){var update=user.following.filter(function(flw){return flw!==id;});setUser(_objectSpread(_objectSpread({},user),{},{following:update}));axios.post(\"https://social-network-edin.herokuapp.com/api/users/unfollow\",{unfollowedID:id,unfollowerID:token.user._id}).then(function(res){if(res.data===\"Unfollowed\"){console.log(user.following);}else{console.log(\"Problem\");}});}if(!user){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"search\",children:[/*#__PURE__*/_jsx(IoMdClose,{color:\"red\",size:\"24px\",onClick:function onClick(){return setSearchToggle(false);}}),users.map(function(person){return/*#__PURE__*/_jsxs(\"div\",{className:\"single-user\",children:[/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return window.location=\"/profile/\"+person._id;},children:[/*#__PURE__*/_jsx(\"img\",{src:person.profilePhoto,alt:\"profile\"}),/*#__PURE__*/_jsx(\"h4\",{children:person.username})]}),!user.following.find(function(flw){return flw===person._id;})?/*#__PURE__*/_jsx(\"button\",{id:\"follow-btn\",onClick:function onClick(){return follow(person._id);},children:\"FOLLOW\"}):/*#__PURE__*/_jsx(\"button\",{id:\"unfollow-btn\",onClick:function onClick(){return unfollow(person._id);},children:\"UNFOLLOW\"})]});})]});}","map":{"version":3,"sources":["C:/Users/PC/OneDrive/Desktop/React/social-network/client/src/components/Search/search.js"],"names":["IoMdClose","useState","useEffect","axios","useSelector","Search","setSearchToggle","user","setUser","token","JSON","parse","localStorage","getItem","users","store","search","follow","id","following","push","console","log","post","followedID","followerID","_id","then","res","data","unfollow","update","filter","flw","unfollowedID","unfollowerID","map","person","window","location","profilePhoto","username","find"],"mappings":"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","sourcesContent":["import {IoMdClose} from \"react-icons/io\";\r\nimport { useState,useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./search.css\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\nexport default function Search({setSearchToggle,user,setUser}){\r\n    let token=JSON.parse(localStorage.getItem(\"token\"));\r\n\r\n\r\n    let users=useSelector(store=>store.search);\r\n\r\n    function follow(id){\r\n        user.following.push(id);\r\n                \r\n        setUser({...user,following:user.following});\r\n        console.log(user.following)\r\n        axios.post(\"https://social-network-edin.herokuapp.com/api/users/follow\",{\r\n            followedID:id,\r\n            followerID:token.user._id\r\n        })\r\n        .then(res=>{\r\n            if(res.data===\"Followed\"){\r\n                console.log(\"Extra\")\r\n            }else{\r\n                console.log(\"Problem\");\r\n            }\r\n        })\r\n    }\r\n\r\n    function unfollow(id){\r\n        let update=user.following.filter(flw=>flw!==id)\r\n        setUser({...user,following:update});\r\n        axios.post(\"https://social-network-edin.herokuapp.com/api/users/unfollow\",{\r\n            unfollowedID:id,\r\n            unfollowerID:token.user._id\r\n        })\r\n        .then(res=>{\r\n            if(res.data===\"Unfollowed\"){\r\n\r\n                console.log(user.following);\r\n            }else{\r\n                console.log(\"Problem\");\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    if(!user){\r\n        return <div>Loading...</div>\r\n    }\r\n    return <div className=\"search\">\r\n        <IoMdClose color=\"red\" size=\"24px\" onClick={()=>setSearchToggle(false)}/>\r\n        {users.map(person=>{\r\n            return <div className=\"single-user\">\r\n            <span onClick={()=>window.location=\"/profile/\"+person._id}>\r\n                <img src={person.profilePhoto} alt=\"profile\"/>\r\n                <h4>{person.username}</h4>\r\n            </span>\r\n\r\n           {!user.following.find(flw=>flw===person._id)?<button id=\"follow-btn\" onClick={()=>follow(person._id)}>FOLLOW</button>:\r\n           <button id=\"unfollow-btn\" onClick={()=>unfollow(person._id)}>UNFOLLOW</button>}\r\n        </div>\r\n        })}\r\n        \r\n    </div>\r\n}"]},"metadata":{},"sourceType":"module"}