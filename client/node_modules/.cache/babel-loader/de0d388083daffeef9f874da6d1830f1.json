{"ast":null,"code":"import _slicedToArray from\"C:/Users/PC/OneDrive/Desktop/React/social-network/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useSelector,useDispatch}from\"react-redux\";import Header from\"../Header/header\";import Footer from\"../Footer/footer\";import{useEffect,useState}from\"react\";import axios from\"axios\";import Post from\"../Post/post\";import\"./home.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){var dispatch=useDispatch();var _useState=useState(\"Please wait...\"),_useState2=_slicedToArray(_useState,2),alert=_useState2[0],setAlert=_useState2[1];var token=JSON.parse(localStorage.getItem(\"token\"));var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];useEffect(function(){var id=token.user._id;axios.post(\"https://social-network-edin.herokuapp.com/api/users/getprofile\",{userid:id}).then(function(res){if(typeof res.data===\"object\"){setUser(res.data);}else{console.log(\"User not found.\");}});},[token.user._id]);function getPosts(){if(user!==undefined){axios.post(\"https://social-network-edin.herokuapp.com/api/posts/getposts\",{user:user}).then(function(res){res.data.map(function(single){single.user=JSON.stringify(single.user);});if(res.data.length<=0){setAlert(\"You have not any posts to see right now.\");}dispatch({type:\"LOAD\",payload:res.data});});}}useEffect(function(){getPosts();// eslint-disable-next-line \n},[user]);var posts=useSelector(function(store){return store.posts;});console.log(posts);var reversedPosts=[];for(var i=posts.length-1;i>=0;i--){reversedPosts.push(posts[i]);}return/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsx(Header,{setUser:setUser,user:user}),posts.length<=0?/*#__PURE__*/_jsx(\"p\",{children:alert}):\"\",reversedPosts.map(function(post){return/*#__PURE__*/_jsx(Post,{post:post,user:token,dispatch:dispatch});}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"sources":["C:/Users/PC/OneDrive/Desktop/React/social-network/client/src/components/Home.js/home.js"],"names":["useSelector","useDispatch","Header","Footer","useEffect","useState","axios","Post","Home","dispatch","alert","setAlert","token","JSON","parse","localStorage","getItem","user","setUser","id","_id","post","userid","then","res","data","console","log","getPosts","undefined","map","single","stringify","length","type","payload","posts","store","reversedPosts","i","push"],"mappings":"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","sourcesContent":["import { useSelector , useDispatch } from \"react-redux\";\r\nimport Header from \"../Header/header\";\r\nimport Footer from \"../Footer/footer\";\r\nimport { useEffect,useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Post from \"../Post/post\";\r\nimport \"./home.css\";\r\n\r\nexport default function Home(){\r\n    \r\n    const dispatch=useDispatch();\r\n    let [alert,setAlert]=useState(\"Please wait...\")\r\n    let token=JSON.parse(localStorage.getItem(\"token\"));\r\n    const[user,setUser]=useState();\r\n    useEffect(()=>{\r\n        let id=token.user._id;\r\n        axios.post(\"https://social-network-edin.herokuapp.com/api/users/getprofile\",{\r\n            userid:id,\r\n        })\r\n        .then(res=>{\r\n            \r\n            if(typeof(res.data)===\"object\"){\r\n                setUser(res.data);\r\n                \r\n            }else{\r\n                console.log(\"User not found.\");\r\n            }\r\n        })\r\n\r\n    },[token.user._id]) \r\n\r\n    function getPosts(){\r\n        if(user!==undefined){\r\n            axios.post(\"https://social-network-edin.herokuapp.com/api/posts/getposts\",{\r\n                user:user\r\n            })\r\n            .then(res=>{\r\n                res.data.map(single=>{\r\n                    single.user=JSON.stringify(single.user)\r\n                })\r\n                if(res.data.length<=0){\r\n                    setAlert(\"You have not any posts to see right now.\")\r\n                }\r\n                dispatch({type:\"LOAD\",payload:res.data});\r\n            })\r\n        }\r\n\r\n    }\r\n    useEffect(()=>{\r\n        getPosts();\r\n        // eslint-disable-next-line \r\n    },[user])\r\n    \r\n\r\n    const posts=useSelector(store=>store.posts)\r\n    console.log(posts)\r\n\r\n    let reversedPosts=[];\r\n    for(var i=posts.length-1;i>=0;i--){\r\n        reversedPosts.push(posts[i]);\r\n    }\r\n    \r\n    return <div className=\"home\">\r\n        <Header setUser={setUser} user={user}/>\r\n        {posts.length<=0 ? <p>{alert}</p>:\"\"}\r\n        {reversedPosts.map(post=>{\r\n            return <Post post={post} user={token} dispatch={dispatch}/>\r\n        })}\r\n        <Footer/>\r\n    </div>\r\n}"]},"metadata":{},"sourceType":"module"}