{"ast":null,"code":"import _slicedToArray from\"C:/Users/PC/OneDrive/Desktop/React/social-network/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./post.css\";import{AiOutlineHeart}from\"react-icons/ai\";import{FaRegCommentAlt}from\"react-icons/fa\";import{IoMdClose}from\"react-icons/io\";import{useState}from\"react\";import axios from\"axios\";import{useSpring,animated}from\"react-spring\";import{useSelector}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Post(_ref){var post=_ref.post,user=_ref.user,dispatch=_ref.dispatch;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),commentToggle=_useState2[0],setCommentToggle=_useState2[1];var commentsStyle=useSpring(commentToggle?{display:\"block\"}:{display:\"none\"});var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),likeTrigger=_useState4[0],setLikeTrigger=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),comment=_useState6[0],setComment=_useState6[1];var updatedPosts=useSelector(function(store){return store.posts;});function postComment(){if(typeof comment===\"string\"&&comment.length>0){var commObj={postid:post._id,user:user.user,comment:comment,date:Date.now()};dispatch({type:\"ADDCOMMENT\",payload:commObj});axios.put(\"/api/posts/postcomment\",commObj);setComment(\"\");}}function deleteComment(comm){dispatch({type:\"DELETECOMMENT\",payload:comm});axios.put(\"https://social-network-edin.herokuapp.com/api/posts/deletecomment\",comm);setCommentToggle(false);}function like(postid){var a=post.likes.find(function(id){return id===user.user._id;});if(!a){axios.put(\"https://social-network-edin.herokuapp.com/api/posts/like\",{postid:postid,userid:user.user._id});dispatch({type:\"LIKE\",payload:{userid:user.user._id,postid:postid}});setLikeTrigger(!likeTrigger);}else{axios.put(\"https://social-network-edin.herokuapp.com/api/posts/unlike\",{postid:postid,userid:user.user._id});dispatch({type:\"UNLIKE\",payload:{postid:postid,userid:user.user._id}});setLikeTrigger(!likeTrigger);}}var postUser=JSON.parse(post.user);var singlePost=updatedPosts.find(function(photo){return photo._id===post._id;});var userPhoto=JSON.parse(post.user);return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(animated.div,{className:\"all-comments\",style:commentsStyle,children:[/*#__PURE__*/_jsx(IoMdClose,{size:\"32px\",color:\"red\",onClick:function onClick(){return setCommentToggle(false);}}),post.comments.map(function(singleComment){return/*#__PURE__*/_jsxs(\"div\",{className:\"single-comment\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return window.location=\"/profile/\"+singleComment.user._id;},children:[/*#__PURE__*/_jsx(\"img\",{src:singleComment.user.profilePhoto,alt:\"prodile\"}),/*#__PURE__*/_jsx(\"h4\",{children:singleComment.user.username})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\": \",singleComment.comment]})]}),user.user._id===postUser._id||singleComment.user._id===postUser._id?/*#__PURE__*/_jsx(IoMdClose,{onClick:function onClick(){return deleteComment(singleComment);}}):false]});})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post-header\",children:/*#__PURE__*/_jsxs(\"span\",{onClick:function onClick(){return window.location=\"/profile/\"+userPhoto._id;},children:[/*#__PURE__*/_jsx(\"img\",{src:userPhoto.profilePhoto,alt:\"profile\"}),/*#__PURE__*/_jsx(\"h3\",{children:userPhoto.username})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:post.photo,alt:\"profile\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"description\",children:[/*#__PURE__*/_jsx(\"h5\",{onClick:function onClick(){return window.location=\"/profile/\"+userPhoto._id;},children:userPhoto.username}),/*#__PURE__*/_jsx(\"p\",{children:post.description})]}),/*#__PURE__*/_jsxs(\"h5\",{style:{margin:\"0px\",textAlign:\"left\"},children:[post.likes.length,\" likes\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"reactions\",children:/*#__PURE__*/_jsxs(\"span\",{children:[!singlePost.likes.find(function(like){return like===user.user._id;})?/*#__PURE__*/_jsx(AiOutlineHeart,{size:\"28px\",onClick:function onClick(){return like(post._id);},color:\"black\"}):/*#__PURE__*/_jsx(AiOutlineHeart,{size:\"28px\",onClick:function onClick(){return like(post._id);},color:\"red\"}),/*#__PURE__*/_jsx(FaRegCommentAlt,{size:\"25px\",onClick:function onClick(){return setCommentToggle(true);}})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:comment,onChange:function onChange(e){return setComment(e.target.value);},placeholder:\"Write comment...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return postComment();},children:\"POST\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post-comments\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"single-comment last-comment\",children:[/*#__PURE__*/_jsx(\"h4\",{children:post.comments.length>0?post.comments[post.comments.length-1].user.username:\" \"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",post.comments.length>0?post.comments[post.comments.length-1].comment:\" \"]})]})})]});}","map":{"version":3,"sources":["C:/Users/PC/OneDrive/Desktop/React/social-network/client/src/components/Post/post.js"],"names":["AiOutlineHeart","FaRegCommentAlt","IoMdClose","useState","axios","useSpring","animated","useSelector","Post","post","user","dispatch","commentToggle","setCommentToggle","commentsStyle","display","likeTrigger","setLikeTrigger","comment","setComment","updatedPosts","store","posts","postComment","length","commObj","postid","_id","date","Date","now","type","payload","put","deleteComment","comm","like","a","likes","find","id","userid","postUser","JSON","parse","singlePost","photo","userPhoto","comments","map","singleComment","window","location","profilePhoto","username","description","margin","textAlign","e","target","value"],"mappings":"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","sourcesContent":["import \"./post.css\";\r\nimport { AiOutlineHeart} from \"react-icons/ai\";\r\nimport {FaRegCommentAlt} from \"react-icons/fa\";\r\nimport {IoMdClose} from \"react-icons/io\";\r\nimport {useState} from \"react\";\r\nimport axios from \"axios\";\r\nimport {useSpring,animated} from \"react-spring\";\r\nimport {useSelector} from \"react-redux\";\r\n\r\n\r\n\r\nexport default function Post({post,user,dispatch}){\r\n\r\n    const [commentToggle,setCommentToggle]=useState(false)\r\n    const commentsStyle=useSpring(commentToggle ? {display:\"block\"}:{display:\"none\"});\r\n    const [likeTrigger,setLikeTrigger]=useState(false);\r\n    const [comment,setComment]=useState();\r\n    \r\n    let updatedPosts=useSelector(store=>store.posts)\r\n\r\n    function postComment(){\r\n        if(typeof(comment)===\"string\" && comment.length>0){\r\n            let commObj={\r\n                postid:post._id,        \r\n                user:user.user,\r\n                comment:comment,\r\n                date:Date.now()\r\n            }\r\n            \r\n            dispatch({type:\"ADDCOMMENT\",payload:commObj});\r\n            axios.put(\"/api/posts/postcomment\",commObj);\r\n\r\n            setComment(\"\");\r\n        }\r\n    \r\n    }\r\n      function deleteComment(comm){\r\n        dispatch({type:\"DELETECOMMENT\",payload:comm});\r\n        axios.put(\"https://social-network-edin.herokuapp.com/api/posts/deletecomment\",comm)\r\n        setCommentToggle(false);\r\n\r\n    }\r\n\r\n    function like(postid){\r\n        let a=post.likes.find(id=>id===user.user._id);\r\n        if(!a){\r\n            axios.put(\"https://social-network-edin.herokuapp.com/api/posts/like\",{\r\n                postid:postid,\r\n                userid:user.user._id\r\n            })\r\n            dispatch({type:\"LIKE\",payload:{userid:user.user._id,postid:postid}});\r\n            setLikeTrigger(!likeTrigger)\r\n        }else{\r\n            axios.put(\"https://social-network-edin.herokuapp.com/api/posts/unlike\",{\r\n                postid:postid,\r\n                userid:user.user._id\r\n            })\r\n            dispatch({type:\"UNLIKE\",payload:{postid:postid,userid:user.user._id}});\r\n            setLikeTrigger(!likeTrigger)\r\n           \r\n        }\r\n\r\n    }\r\n\r\n\r\n    let postUser=JSON.parse(post.user)\r\n \r\n\r\n    let singlePost=updatedPosts.find(photo=>photo._id===post._id);\r\n\r\n\r\n    const userPhoto=JSON.parse(post.user);\r\n\r\n    return <div className=\"post\">\r\n\r\n       <animated.div className=\"all-comments\" style={commentsStyle}>\r\n            <IoMdClose size=\"32px\" color=\"red\" onClick={()=>setCommentToggle(false)}/>\r\n           \r\n            {post.comments.map(singleComment=>{\r\n                 \r\n            return  <div className=\"single-comment\">\r\n                        <span>\r\n                            <span onClick={()=>window.location=\"/profile/\"+singleComment.user._id}>\r\n                                <img src={singleComment.user.profilePhoto} alt=\"prodile\"/>\r\n                                <h4>{singleComment.user.username}</h4>\r\n                            </span>\r\n                            \r\n                            <p>: {singleComment.comment}</p>\r\n                        </span>\r\n                        {user.user._id===postUser._id || singleComment.user._id===postUser._id ? <IoMdClose onClick={()=>deleteComment(singleComment)}/>:false}\r\n                    </div>\r\n            })}\r\n           \r\n            </animated.div>\r\n\r\n\r\n        <div className=\"post-header\">\r\n            <span onClick={()=>window.location=\"/profile/\"+userPhoto._id}>\r\n                <img src={userPhoto.profilePhoto} alt=\"profile\"/>\r\n                <h3>{userPhoto.username}</h3>\r\n            </span>\r\n            \r\n        </div>\r\n        <div className=\"image-container\">\r\n            <img src={post.photo} alt=\"profile\"/>\r\n        </div>\r\n        <div className=\"description\">\r\n            <h5 onClick={()=>window.location=\"/profile/\"+userPhoto._id}>{userPhoto.username}</h5>\r\n            <p>{post.description}</p>\r\n        </div>\r\n        <h5 style={{margin:\"0px\",textAlign:\"left\"}}>{post.likes.length} likes</h5>\r\n        <div className=\"reactions\">\r\n            <span>\r\n                {!singlePost.likes.find(like=>like===user.user._id)?<AiOutlineHeart size=\"28px\" onClick={()=>like(post._id)} color=\"black\"/>:\r\n                <AiOutlineHeart size=\"28px\" onClick={()=>like(post._id)} color=\"red\"/>}\r\n                <FaRegCommentAlt size=\"25px\" onClick={()=>setCommentToggle(true)}/>\r\n              \r\n            </span>\r\n\r\n        </div>\r\n        <div className=\"comment\">\r\n            <textarea value={comment} onChange={e=>setComment(e.target.value)} placeholder=\"Write comment...\"/>\r\n            <button onClick={()=>postComment()}>POST</button>\r\n        </div>\r\n        <div className=\"post-comments\">\r\n            <div className=\"single-comment last-comment\">\r\n                <h4>{post.comments.length>0 ? post.comments[post.comments.length-1].user.username:\" \"}</h4>\r\n                <p> {post.comments.length>0 ? post.comments[post.comments.length-1].comment:\" \"}</p>\r\n            </div>\r\n        </div>\r\n        \r\n    </div>\r\n}"]},"metadata":{},"sourceType":"module"}